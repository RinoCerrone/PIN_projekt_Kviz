@model Kviz.Models.Quiz

<h1>Quiz</h1>

<form method="post" action="/Question/Submit">
    @for (var i = 0; i < Model.Questions.Count; i++)
    {
        var currentIndex = i; // Declare and assign currentIndex within the loop scope

        <div class="question" style="display: @(i == 0 ? "block" : "none")" id="question@(i)">
            <h3>@Model.Questions[i].Text</h3>
            <ul style="list-style-type:none">
                @for (var j = 0; j < Model.Questions[i].Answers.Count; j++)
                {
                    <li>
                        <input type="radio" name="answers[@i]" value="@j" onclick="highlightAnswer('@currentIndex', @j)">
                        <label>@Model.Questions[i].Answers[j]</label>
                    </li>
                }
            </ul>
        </div>
    }
    
    <div>
        <button type="submit" name="action" value="submit" id="submitButton" style="display: none;">Submit</button>
    </div>
</form>

@section scripts {
<script>
    var currentIndex = 0;
    
    function showQuestion(index) {
        var questions = document.getElementsByClassName("question");
        for (var i = 0; i < questions.length; i++) {
            questions[i].style.display = (i === index) ? "block" : "none";
        }
    }

    function highlightAnswer(currentIndex, selectedOption) {
        // Get the index of the selected option
        var selectedIndex = parseInt(selectedOption.value);

        // Perform any necessary actions based on the selected answer
        // ...

        // Move to the next question after a 2-second delay
        setTimeout(function() {
            
            if (currentIndex < @Model.Questions.Count) {
                showQuestion(currentIndex);
            } else {
                // End of quiz, submit the form
                document.forms[0].submit();
            }
            currentIndex++;
        }, 2000);
    }

    // Show the initial question
    showQuestion(currentIndex);
</script>


          
}


